{"version":3,"sources":["../src/index.js"],"names":["Modal","props","animateFadeIn","callback","state","animationFade","stop","Animated","timing","opacityFade","toValue","duration","setState","requestAnimationFrame","styleFade","display","start","animateFadeOut","animateSlideIn","animationSlide","slideTranslation","easing","Easing","out","poly","animateSlideOut","in","visible","Value","handleShow","handleClose","animationType","onShow","onDismiss","transform","translateY","interpolate","inputRange","outputRange","Dimensions","get","height","extrapolate","opacity","style","transparent","children","transparentStyle","bgTransparent","bgNotTransparent","animationStyle","getAnimationStyle","baseStyle","Component","propTypes","PropTypes","oneOf","bool","onRequestClose","Platform","isTV","OS","func","isRequired","node","defaultProps","StyleSheet","create","position","top","right","bottom","left","zIndex","backgroundColor","hidden"],"mappings":"ygCAYqBA,M,aAuBnB,WAAYC,CAAZ,CAAmB,kJACXA,CADW,YA8CnBC,aA9CmB,CA8CH,SAACC,CAAD,CAAc,CACxB,EAAKC,KAAL,CAAWC,aADa,EAE1B,EAAKD,KAAL,CAAWC,aAAX,CAAyBC,IAAzB,EAF0B,CAK5B,GAAMD,GAAgBE,yBAASC,MAAT,CAAgB,EAAKJ,KAAL,CAAWK,WAA3B,CAAwC,CAC5DC,QAAS,CADmD,CAE5DC,SAAU,GAFkD,CAAxC,CAAtB,CAKA,EAAKC,QAAL,CACE,CACEP,eADF,CADF,CAIE,UAAM,CACJQ,sBAAsB,UAAM,CAC1B,EAAKD,QAAL,CAAc,CAAEE,UAAW,CAAEC,QAAS,MAAX,CAAb,CAAd,CAAkD,iBAChD,GAAKX,KAAL,CAAWC,aAAX,CAAyBW,KAAzB,CAA+Bb,CAA/B,CADgD,CAAlD,CAGD,CAJD,CAKD,CAVH,CAYD,CApEkB,GAsEnBc,cAtEmB,CAsEF,SAACd,CAAD,CAAc,CACzB,EAAKC,KAAL,CAAWC,aADc,EAE3B,EAAKD,KAAL,CAAWC,aAAX,CAAyBC,IAAzB,EAF2B,CAK7B,GAAMD,GAAgBE,yBAASC,MAAT,CAAgB,EAAKJ,KAAL,CAAWK,WAA3B,CAAwC,CAC5DC,QAAS,CADmD,CAE5DC,SAAU,GAFkD,CAAxC,CAAtB,CAKA,EAAKC,QAAL,CACE,CACEP,eADF,CADF,CAIE,UAAM,CACJQ,sBAAsB,UAAM,CAC1B,EAAKT,KAAL,CAAWC,aAAX,CAAyBW,KAAzB,CAA+B,UAAM,CACnC,EAAKJ,QAAL,CACE,CACEE,UAAW,CAAEC,QAAS,MAAX,CADb,CADF,CAIEZ,CAJF,CAMD,CAPD,CAQD,CATD,CAUD,CAfH,CAiBD,CAjGkB,GAqGnBe,cArGmB,CAqGF,SAACf,CAAD,CAAc,CACzB,EAAKC,KAAL,CAAWe,cADc,EAE3B,EAAKf,KAAL,CAAWe,cAAX,CAA0Bb,IAA1B,EAF2B,CAK7B,GAAMa,GAAiBZ,yBAASC,MAAT,CAAgB,EAAKJ,KAAL,CAAWgB,gBAA3B,CAA6C,CAClEV,QAAS,CADyD,CAElEW,OAAQC,uBAAOC,GAAP,CAAWD,uBAAOE,IAAP,CAAY,CAAZ,CAAX,CAF0D,CAGlEb,SAAU,GAHwD,CAA7C,CAAvB,CAMA,EAAKC,QAAL,CACE,CACEO,gBADF,CADF,CAIE,UAAM,CACJN,sBAAsB,UAAM,CAC1B,EAAKD,QAAL,CAAc,CAAEE,UAAW,CAAEC,QAAS,MAAX,CAAb,CAAd,CAAkD,iBAChD,GAAKX,KAAL,CAAWe,cAAX,CAA0BH,KAA1B,CAAgCb,CAAhC,CADgD,CAAlD,CAGD,CAJD,CAKD,CAVH,CAYD,CA5HkB,GA8HnBsB,eA9HmB,CA8HD,SAACtB,CAAD,CAAc,CAC1B,EAAKC,KAAL,CAAWe,cADe,EAE5B,EAAKf,KAAL,CAAWe,cAAX,CAA0Bb,IAA1B,EAF4B,CAK9B,GAAMa,GAAiBZ,yBAASC,MAAT,CAAgB,EAAKJ,KAAL,CAAWgB,gBAA3B,CAA6C,CAClEV,QAAS,CADyD,CAElEW,OAAQC,uBAAOI,EAAP,CAAUJ,uBAAOE,IAAP,CAAY,CAAZ,CAAV,CAF0D,CAGlEb,SAAU,GAHwD,CAA7C,CAAvB,CAMA,EAAKC,QAAL,CACE,CACEO,gBADF,CADF,CAIE,UAAM,CACJN,sBAAsB,UAAM,CAC1B,EAAKT,KAAL,CAAWe,cAAX,CAA0BH,KAA1B,CAAgC,UAAM,CACpC,EAAKJ,QAAL,CACE,CACEE,UAAW,CAAEC,QAAS,MAAX,CADb,CADF,CAIEZ,CAJF,CAMD,CAPD,CAQD,CATD,CAUD,CAfH,CAiBD,CA1JkB,CAGjB,EAAKC,KAAL,CAAa,CACXe,eAAgB,IADL,CAEXd,cAAe,IAFJ,CAGXS,UAAW,CAAEC,QAASd,EAAM0B,OAAN,CAAgB,MAAhB,CAAyB,MAApC,CAHA,CAIXlB,YAAa,GAAIF,0BAASqB,KAAb,CAAmB,CAAnB,CAJF,CAKXR,iBAAkB,GAAIb,0BAASqB,KAAb,CAAmB,CAAnB,CALP,CAHI,EAUlB,C,0GAEmB,CACd,KAAK3B,KAAL,CAAW0B,OADG,EACM,KAAKE,UAAL,EACzB,C,sDAEsC,IAAXF,EAAW,GAAXA,OAAW,CACjCA,GAAW,CAAC,KAAK1B,KAAL,CAAW0B,OADU,EACD,KAAKE,UAAL,EADC,CAEjC,CAACF,CAAD,EAAY,KAAK1B,KAAL,CAAW0B,OAFU,EAED,KAAKG,WAAL,EACrC,C,sCAEY,OACuB,KAAK7B,KAD5B,CACH8B,CADG,GACHA,aADG,CACYC,CADZ,GACYA,MADZ,CAGW,OAAlB,IAHO,CAIT,KAAKd,cAAL,CAAoBc,CAApB,CAJS,CAKkB,MAAlB,IALA,CAMT,KAAK9B,aAAL,CAAmB8B,CAAnB,CANS,CAQTA,GAEH,C,uCAEa,OACyB,KAAK/B,KAD9B,CACJ8B,CADI,GACJA,aADI,CACWE,CADX,GACWA,SADX,CAGU,OAAlB,IAHQ,CAIV,KAAKR,eAAL,CAAqBQ,CAArB,CAJU,CAKiB,MAAlB,IALC,CAMV,KAAKhB,cAAL,CAAoBgB,CAApB,CANU,CAQVA,GAEH,C,6CAkHmB,OACiB,KAAKhC,KADtB,CACV0B,CADU,GACVA,OADU,CACDI,CADC,GACDA,aADC,CAEVjB,CAFU,CAEI,KAAKV,KAFT,CAEVU,SAFU,OAII,OAAlB,IAJc,CAKT,CACL,CACEoB,UAAW,CACT,CACEC,WAAY,KAAK/B,KAAL,CAAWgB,gBAAX,CAA4BgB,WAA5B,CAAwC,CAClDC,WAAY,CAAC,CAAD,CAAI,CAAJ,CADsC,CAElDC,YAAa,CAACC,2BAAWC,GAAX,CAAe,QAAf,EAAyBC,MAA1B,CAAkC,CAAlC,CAFqC,CAGlDC,YAAa,OAHqC,CAAxC,CADd,CADS,CADb,CADK,CAYL5B,CAZK,CALS,CAoBI,MAAlB,IApBc,CAqBT,CAAC,CAAE6B,QAAS,KAAKvC,KAAL,CAAWK,WAAtB,CAAD,CAAsCK,CAAtC,CArBS,CAwBX,CAAC8B,MAAMjB,EAAU,SAAV,CAAsB,QAA5B,CAAD,CACR,C,kCAEQ,OAC2B,KAAK1B,KADhC,CACC4C,CADD,GACCA,WADD,CACcC,CADd,GACcA,QADd,CAGDC,EAAmBF,EACrBD,MAAMI,aADe,CAErBJ,MAAMK,gBALH,CAMDC,EAAiB,KAAKC,iBAAL,EANhB,CAQP,MACE,+BAAC,gBAAD,MACE,8BAAC,wBAAD,CAAU,IAAV,EACE,MAAO,CAACP,MAAMQ,SAAP,CAAkBL,CAAlB,CAAoCG,CAApC,CADT,EAGGJ,CAHH,CADF,CAQH,C,OAhOgCO,gB,EAAdrD,K,CACZsD,S,CAAY,CACjBvB,cAAewB,oBAAUC,KAAV,CAAgB,CAAC,MAAD,CAAS,OAAT,CAAkB,MAAlB,CAAhB,CADE,CAEjBX,YAAaU,oBAAUE,IAFN,CAGjB9B,QAAS4B,oBAAUE,IAHF,CAIjBC,eACEC,yBAASC,IAAT,EAAiC,SAAhB,4BAASC,EAA1B,CACIN,oBAAUO,IAAV,CAAeC,UADnB,CAEIR,oBAAUO,IAPC,CAQjB9B,OAAQuB,oBAAUO,IARD,CASjB7B,UAAWsB,oBAAUO,IATJ,CAUjBhB,SAAUS,oBAAUS,IAAV,CAAeD,UAVR,C,CADA/D,K,CAcZiE,Y,CAAe,CACpBlC,cAAe,MADK,CAEpBc,cAFoB,CAGpBlB,UAHoB,CAIpBK,OAAQ,YAAM,CAAE,CAJI,CAKpB0B,eAAgB,YAAM,CAAE,CALJ,CAMpBzB,UAAW,YAAM,CAAE,CANC,C,iBAdHjC,K,CAmOrB,GAAM4C,OAAQsB,2BAAWC,MAAX,CAAkB,CAC9Bf,UAAW,CACTgB,SAAU,UADD,CAETC,IAAK,CAFI,CAGTC,MAAO,CAHE,CAITC,OAAQ,CAJC,CAKTC,KAAM,CALG,CAMTC,OAAQ,IANC,CADmB,CAS9BzB,cAAe,CACb0B,gBAAiB,aADJ,CATe,CAY9BzB,iBAAkB,CAChByB,gBAAiB,SADD,CAZY,CAe9BC,OAAQ,CACN5D,QAAS,MADH,CAfsB,CAkB9BY,QAAS,CACPZ,QAAS,MADF,CAlBqB,CAAlB,CAAd","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Animated,\n  Dimensions,\n  Easing,\n  Platform,\n  StyleSheet,\n} from 'react-native';\n\nimport ModalPortal from './Portal';\n\nexport default class Modal extends Component {\n  static propTypes = {\n    animationType: PropTypes.oneOf(['none', 'slide', 'fade']),\n    transparent: PropTypes.bool,\n    visible: PropTypes.bool,\n    onRequestClose:\n      Platform.isTV || Platform.OS === 'android'\n        ? PropTypes.func.isRequired\n        : PropTypes.func,\n    onShow: PropTypes.func,\n    onDismiss: PropTypes.func,\n    children: PropTypes.node.isRequired,\n  };\n\n  static defaultProps = {\n    animationType: 'none',\n    transparent: false,\n    visible: true,\n    onShow: () => {},\n    onRequestClose: () => {},\n    onDismiss: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      animationSlide: null,\n      animationFade: null,\n      styleFade: { display: props.visible ? 'flex' : 'none' },\n      opacityFade: new Animated.Value(0),\n      slideTranslation: new Animated.Value(0),\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.visible) this.handleShow();\n  }\n\n  componentWillReceiveProps({ visible }) {\n    if (visible && !this.props.visible) this.handleShow();\n    if (!visible && this.props.visible) this.handleClose();\n  }\n\n  handleShow() {\n    const { animationType, onShow } = this.props;\n\n    if (animationType === 'slide') {\n      this.animateSlideIn(onShow);\n    } else if (animationType === 'fade') {\n      this.animateFadeIn(onShow);\n    } else {\n      onShow();\n    }\n  }\n\n  handleClose() {\n    const { animationType, onDismiss } = this.props;\n\n    if (animationType === 'slide') {\n      this.animateSlideOut(onDismiss);\n    } else if (animationType === 'fade') {\n      this.animateFadeOut(onDismiss);\n    } else {\n      onDismiss();\n    }\n  }\n\n  // Fade Animation Implementation\n  animateFadeIn = (callback) => {\n    if (this.state.animationFade) {\n      this.state.animationFade.stop();\n    }\n\n    const animationFade = Animated.timing(this.state.opacityFade, {\n      toValue: 1,\n      duration: 300,\n    });\n\n    this.setState(\n      {\n        animationFade,\n      },\n      () => {\n        requestAnimationFrame(() => {\n          this.setState({ styleFade: { display: 'flex' } }, () =>\n            this.state.animationFade.start(callback)\n          );\n        });\n      }\n    );\n  };\n\n  animateFadeOut = (callback) => {\n    if (this.state.animationFade) {\n      this.state.animationFade.stop();\n    }\n\n    const animationFade = Animated.timing(this.state.opacityFade, {\n      toValue: 0,\n      duration: 300,\n    });\n\n    this.setState(\n      {\n        animationFade,\n      },\n      () => {\n        requestAnimationFrame(() => {\n          this.state.animationFade.start(() => {\n            this.setState(\n              {\n                styleFade: { display: 'none' },\n              },\n              callback\n            );\n          });\n        });\n      }\n    );\n  };\n  // End of Fade Animation Implementation\n\n  // Slide Animation Implementation\n  animateSlideIn = (callback) => {\n    if (this.state.animationSlide) {\n      this.state.animationSlide.stop();\n    }\n\n    const animationSlide = Animated.timing(this.state.slideTranslation, {\n      toValue: 1,\n      easing: Easing.out(Easing.poly(4)),\n      duration: 300,\n    });\n\n    this.setState(\n      {\n        animationSlide,\n      },\n      () => {\n        requestAnimationFrame(() => {\n          this.setState({ styleFade: { display: 'flex' } }, () =>\n            this.state.animationSlide.start(callback)\n          );\n        });\n      }\n    );\n  };\n\n  animateSlideOut = (callback) => {\n    if (this.state.animationSlide) {\n      this.state.animationSlide.stop();\n    }\n\n    const animationSlide = Animated.timing(this.state.slideTranslation, {\n      toValue: 0,\n      easing: Easing.in(Easing.poly(4)),\n      duration: 300,\n    });\n\n    this.setState(\n      {\n        animationSlide,\n      },\n      () => {\n        requestAnimationFrame(() => {\n          this.state.animationSlide.start(() => {\n            this.setState(\n              {\n                styleFade: { display: 'none' },\n              },\n              callback\n            );\n          });\n        });\n      }\n    );\n  };\n  // End of Slide Animation Implementation\n\n  getAnimationStyle() {\n    const { visible, animationType } = this.props;\n    const { styleFade } = this.state;\n\n    if (animationType === 'slide') {\n      return [\n        {\n          transform: [\n            {\n              translateY: this.state.slideTranslation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [Dimensions.get('window').height, 0],\n                extrapolate: 'clamp',\n              }),\n            },\n          ],\n        },\n        styleFade,\n      ];\n    }\n    if (animationType === 'fade') {\n      return [{ opacity: this.state.opacityFade }, styleFade];\n    }\n\n    return [style[visible ? 'visible' : 'hidden']];\n  }\n\n  render() {\n    const { transparent, children } = this.props;\n\n    const transparentStyle = transparent\n      ? style.bgTransparent\n      : style.bgNotTransparent;\n    const animationStyle = this.getAnimationStyle();\n\n    return (\n      <ModalPortal>\n        <Animated.View\n          style={[style.baseStyle, transparentStyle, animationStyle]}\n        >\n          {children}\n        </Animated.View>\n      </ModalPortal>\n    );\n  }\n}\n\nconst style = StyleSheet.create({\n  baseStyle: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    zIndex: 9999,\n  },\n  bgTransparent: {\n    backgroundColor: 'transparent',\n  },\n  bgNotTransparent: {\n    backgroundColor: '#ffffff',\n  },\n  hidden: {\n    display: 'none',\n  },\n  visible: {\n    display: 'flex',\n  },\n});\n"]}