'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of'),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn'),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require('babel-runtime/helpers/inherits'),_inherits3=_interopRequireDefault(_inherits2),_react=require('react'),_react2=_interopRequireDefault(_react),_propTypes=require('prop-types'),_propTypes2=_interopRequireDefault(_propTypes),_reactNativeWeb=require('react-native-web'),_Portal=require('./Portal'),_Portal2=_interopRequireDefault(_Portal);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var Modal=function(a){function b(a){(0,_classCallCheck3.default)(this,b);var c=(0,_possibleConstructorReturn3.default)(this,(b.__proto__||(0,_getPrototypeOf2.default)(b)).call(this,a));return c.animateFadeIn=function(a){c.state.animationFade&&c.state.animationFade.stop();var b=_reactNativeWeb.Animated.timing(c.state.opacityFade,{toValue:1,duration:300});c.setState({animationFade:b},function(){requestAnimationFrame(function(){c.setState({styleFade:{display:'flex'}},function(){return c.state.animationFade.start(a)})})})},c.animateFadeOut=function(a){c.state.animationFade&&c.state.animationFade.stop();var b=_reactNativeWeb.Animated.timing(c.state.opacityFade,{toValue:0,duration:300});c.setState({animationFade:b},function(){requestAnimationFrame(function(){c.state.animationFade.start(function(){c.setState({styleFade:{display:'none'}},a)})})})},c.animateSlideIn=function(a){c.state.animationSlide&&c.state.animationSlide.stop();var b=_reactNativeWeb.Animated.timing(c.state.slideTranslation,{toValue:1,easing:_reactNativeWeb.Easing.out(_reactNativeWeb.Easing.poly(4)),duration:300});c.setState({animationSlide:b},function(){requestAnimationFrame(function(){c.setState({styleFade:{display:'flex'}},function(){return c.state.animationSlide.start(a)})})})},c.animateSlideOut=function(a){c.state.animationSlide&&c.state.animationSlide.stop();var b=_reactNativeWeb.Animated.timing(c.state.slideTranslation,{toValue:0,easing:_reactNativeWeb.Easing.in(_reactNativeWeb.Easing.poly(4)),duration:300});c.setState({animationSlide:b},function(){requestAnimationFrame(function(){c.state.animationSlide.start(function(){c.setState({styleFade:{display:'none'}},a)})})})},c.state={animationSlide:null,animationFade:null,styleFade:{display:a.visible?'flex':'none'},opacityFade:new _reactNativeWeb.Animated.Value(0),slideTranslation:new _reactNativeWeb.Animated.Value(0)},c}return(0,_inherits3.default)(b,a),(0,_createClass3.default)(b,[{key:'componentDidMount',value:function a(){this.props.visible&&this.handleShow()}},{key:'componentWillReceiveProps',value:function c(a){var b=a.visible;b&&!this.props.visible&&this.handleShow(),!b&&this.props.visible&&this.handleClose()}},{key:'handleShow',value:function d(){var a=this.props,b=a.animationType,c=a.onShow;'slide'===b?this.animateSlideIn(c):'fade'===b?this.animateFadeIn(c):c()}},{key:'handleClose',value:function d(){var a=this.props,b=a.animationType,c=a.onDismiss;'slide'===b?this.animateSlideOut(c):'fade'===b?this.animateFadeOut(c):c()}},{key:'getAnimationStyle',value:function e(){var a=this.props,b=a.visible,c=a.animationType,d=this.state.styleFade;return'slide'===c?[{transform:[{translateY:this.state.slideTranslation.interpolate({inputRange:[0,1],outputRange:[_reactNativeWeb.Dimensions.get('window').height,0],extrapolate:'clamp'})}]},d]:'fade'===c?[{opacity:this.state.opacityFade},d]:[style[b?'visible':'hidden']]}},{key:'render',value:function f(){var a=this.props,b=a.transparent,c=a.children,d=b?style.bgTransparent:style.bgNotTransparent,e=this.getAnimationStyle();return _react2.default.createElement(_Portal2.default,null,_react2.default.createElement(_reactNativeWeb.Animated.View,{style:[style.baseStyle,d,e]},c))}}]),b}(_react.Component);Modal.propTypes={animationType:_propTypes2.default.oneOf(['none','slide','fade']),transparent:_propTypes2.default.bool,visible:_propTypes2.default.bool,onRequestClose:_reactNativeWeb.Platform.isTV||'android'===_reactNativeWeb.Platform.OS?_propTypes2.default.func.isRequired:_propTypes2.default.func,onShow:_propTypes2.default.func,onDismiss:_propTypes2.default.func,children:_propTypes2.default.node.isRequired},Modal.defaultProps={animationType:'none',transparent:!1,visible:!0,onShow:function a(){},onRequestClose:function a(){},onDismiss:function a(){}},exports.default=Modal;var style=_reactNativeWeb.StyleSheet.create({baseStyle:{position:'absolute',top:0,right:0,bottom:0,left:0,zIndex:9999},bgTransparent:{backgroundColor:'transparent'},bgNotTransparent:{backgroundColor:'#ffffff'},hidden:{display:'none'},visible:{display:'flex'}});
//# sourceMappingURL=index.js.map